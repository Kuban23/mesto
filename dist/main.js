(()=>{"use strict";class e{constructor({data:e,handleCardClick:t},s){this._name=e.name,this._imageAlt=e.name,this._link=e.link,this._selector=s,this._handleCardClick=t}_getTemplate(){return this._element=document.querySelector(this._selector).content.querySelector(".photo").cloneNode(!0),this._element}generateCard(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".photo__like"),this._trashButton=this._element.querySelector(".photo__trash"),this._photoImageTemplate=this._element.querySelector(".photo__image"),this._setEventListeners(),this._photoImageTemplate.src=this._link,this._photoImageTemplate.alt=this._name,this._element.querySelector(".photo__text").textContent=this._name,this._element}_addLike(){this._likeButton.classList.toggle("photo__like_active")}_deleteCard(){this._trashButton.closest(".photo").remove()}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._addLike()})),this._trashButton.addEventListener("click",(()=>{this._deleteCard()})),this._photoImageTemplate.addEventListener("click",(()=>{this._handleCardClick()}))}}class t{constructor({formSelector:e,inputSelector:t,submitButtonSelector:s,inactiveButtonClass:o,inputErrorClass:n,errorClass:r},i){this._element=i,this._formSelector=e,this._inputSelector=t,this._submitButtonSelector=s,this._inactiveButtonClass=o,this._inputErrorClass=n,this._errorClass=r,this._buttonElement=this._element.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._element.querySelectorAll(this._inputSelector))}enableValidation(){this._element.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_showInputError(e){const t=this._element.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._element.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_toggleButtonState(){const e=this._element.checkValidity();this._buttonElement.disabled=!e,this._buttonElement.classList.toggle(this._inactiveButtonClass,!e)}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e),this._toggleButtonState(),this._element.reset()}))}}class s{constructor(e){this._popup=document.querySelector(e),this._handleCloseEsc=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleCloseEsc)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleCloseEsc)}_handleEscClose(e){"Escape"===e.key&&this._popup.classList.contains("popup_opened")&&this.close()}setEventListeners(){this._popup.addEventListener("click",(e=>{(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close"))&&this.close()}))}}class o extends s{constructor({selectorPopup:e,handleFormSubmit:t}){super(e),this._form=this._popup.querySelector(".popup__form"),this._handleFormSubmit=t}_getInputValues(){return this._inputList=document.querySelectorAll(".popup__input"),this._formInputValue={},this._inputList.forEach((e=>{this._formInputValue[e.name]=e.value})),this._formInputValue}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close(),this._form.reset()}}const n=document.querySelector(".profile__edit-button"),r=document.querySelector(".popup__form-prof"),i=document.querySelector(".profile__add-button"),p=(document.querySelector(".popup__submit-button_type_image"),document.querySelector(".popup_type_profile"),document.querySelector(".popup_type_addImage"),document.querySelector(".popup_type_image"),document.querySelector(".popup__input_type_name")),l=document.querySelector(".popup__input_type_profession"),a=document.querySelector(".popup__input_type_title"),u=document.querySelector(".popup__input_type_link"),_=document.querySelector(".profile__name"),c=document.querySelector(".profile__profession"),d=document.querySelector(".popup_type_addImage .popup__form-image"),h={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error"};console.log("Hello, World!");const m=new class extends s{constructor(e){super(e),this._popupImage=this._popup.querySelector(".popup__image"),this._popupName=this._popup.querySelector(".popup__title-image")}open(e,t){this._popupImage.src=e,this._popupName.textContent=t,this._popupImage.alt=t,super.open()}}(".popup_type_image"),y=new class{constructor({nameSelector:e,professionSelector:t}){this._name=document.querySelector(e),this._profession=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,profession:this._profession.textContent}}setUserInfo({name:e,profession:t}){this._name.textContent=e,this._profession.textContent=t}}({nameSelector:".profile__name",professionSelector:".profile__profession"});function S(t){return new e({data:t,handleCardClick:()=>{m.open(t.link,t.name)}},".photo-template").generateCard()}const v=new class{constructor({items:e,renderer:t},s){this._initialArray=e,this._renderer=t,this._container=document.querySelector(s)}renderItems(){this._initialArray.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{v.addItem(S(e))}},".galery");v.renderItems();const f=new o({selectorPopup:".popup_type_addImage",handleFormSubmit:()=>{const e=S({name:a.value,link:u.value});v.addItem(e),f.close()}}),g=new o({selectorPopup:".popup_type_profile",handleFormSubmit:({name:e,profession:t})=>{y.setUserInfo({name:e,profession:t}),_.textContent=p.value,c.textContent=l.value,g.close()}});n.addEventListener("click",(()=>{g.open();const e=y.getUserInfo();p.value=e.name,l.value=e.profession})),i.addEventListener("click",(function(){f.open(),E.resetValidation()})),p.value=_.textContent,l.value=c.textContent,new t(h,r).enableValidation();const E=new t(h,d);E.enableValidation(),m.setEventListeners(),g.setEventListeners(),f.setEventListeners()})();


